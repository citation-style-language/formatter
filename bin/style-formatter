#!/usr/bin/env node

const fs = require('fs')
const path = require('path')
const formatter = require('../index')

if (process.argv.length !== 4) {
  console.log('need input and output file')
  process.exit(1)
}

try {
  const style = fs.readFileSync(process.argv[2], 'utf-8');
  const reindented = formatter.formatStyle(style);
  if (style !== reindented) {
    console.log(path.basename(process.argv[2]), 'reindented');
    fs.writeFileSync(process.argv[3], style);
  }
}
catch (e) {
  if (e === 'invalidXML') {
    console.log('Invalid XML')
  }
  else {
    console.log(e.message, e.stack)
  }
  process.exit(1)
}
